generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  admin
  piloot
  makelaar
}

model User {
  id             Int      @id @default(autoincrement())
  voornaam       String
  naam           String
  gebruikersnaam String   @unique
  rol            Role
  emailadres     String   @unique
  portfolio      String
  niveau         String
  isVerified     Boolean  @default(false)
  bevoegdheden   String
  panden         Pand[]   @relation("UserPanden")
  opdrachten     Opdracht[] @relation("UserOpdrachten")
}

model Pand {
  pandId         Int      @id @default(autoincrement())
  adres          String
  beschrijving   String
  user           User     @relation("UserPanden", fields: [userIdMakelaar], references: [id]) 
  userIdMakelaar Int
  opdracht       Opdracht? @relation("PandOpdracht")
}

model Opdracht {
  opdrachtnummer Int      @id @default(autoincrement())
  datum          DateTime
  beoordeling    String
  puntentotaal   Int
  status         String
  medias         Media[]   @relation("OpdrachtMedias") 
  user           User      @relation("UserOpdrachten", fields: [userId], references: [id])
  userId         Int
  pand           Pand?     @relation("PandOpdracht", fields: [pandId], references: [pandId])
  pandId         Int?      @unique

}

model Media {
  id             Int      @id @default(autoincrement())
  type           String
  bestandslocatie String
  uploadDatum    DateTime
  opdracht       Opdracht @relation("OpdrachtMedias", fields: [opdrachtId], references: [opdrachtnummer])
  opdrachtId     Int
}

model Beoordeling {
  beoordelingId Int      @id @default(autoincrement())
  score         Int
  opmerkingen   String
}
